generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id               String            @id @default(cuid())
  email            String            @unique
  name             String?
  image            String?
  chips            Int               @default(250)
  createdAt        DateTime          @default(now())
  chipTransactions ChipTransaction[]
  games            Game[]
}

model Game {
  id          String     @id @default(cuid())
  userId      String
  bet         Int
  result      GameResult
  userScore   Int
  dealerScore Int
  finalState  Json
  createdAt   DateTime   @default(now())
  user        User       @relation(fields: [userId], references: [id])
}

model ChipTransaction {
  id        String   @id @default(cuid())
  userId    String
  delta     Int
  reason    String
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id])
}

enum GameResult {
  Win
  Lose
  Push
  Blackjack
}
